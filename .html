import React, { useState } from 'react';
import { Network, Server, Wifi, HardDrive, Printer, Camera, Smartphone, Shield, Cloud } from 'lucide-react';

const NetworkTopology = () => {
  const [view, setView] = useState('after');

  const BeforeTopology = () => (
    <div className="w-full h-full p-6 bg-gradient-to-br from-gray-50 to-gray-100">
      <div className="text-center mb-6">
        <h2 className="text-2xl font-bold text-red-600 mb-2">TOPOLOGIA ATUAL (ANTES)</h2>
        <p className="text-sm text-gray-600">Gargalos identificados em vermelho</p>
      </div>

      {/* Cloud */}
      <div className="flex justify-center mb-8">
        <div className="flex flex-col items-center">
          <Cloud className="w-12 h-12 text-blue-400" />
          <div className="text-xs mt-1">Internet</div>
        </div>
      </div>

      {/* Fortigate */}
      <div className="flex justify-center mb-8">
        <div className="flex flex-col items-center">
          <div className="border-4 border-blue-500 bg-blue-100 rounded-lg p-3 shadow-lg">
            <Shield className="w-10 h-10 text-blue-600" />
          </div>
          <div className="text-xs font-bold mt-1">Fortigate 100F</div>
          <div className="text-xs text-green-600">Router Inter-VLAN</div>
          <div className="text-xs text-gray-500">CPU: 4% | MEM: 30%</div>
        </div>
      </div>

      {/* Line to Core */}
      <div className="flex justify-center mb-2">
        <div className="border-l-4 border-dashed border-gray-400 h-12"></div>
      </div>

      {/* Core Switch - SG3428 */}
      <div className="flex justify-center mb-8">
        <div className="flex flex-col items-center">
          <div className="border-4 border-red-600 bg-red-100 rounded-lg p-4 shadow-lg animate-pulse">
            <Network className="w-12 h-12 text-red-700" />
          </div>
          <div className="text-sm font-bold mt-2 text-red-700">SW-TI-01 (SG3428)</div>
          <div className="text-xs text-red-600 font-bold">üî¥ GARGALO CR√çTICO</div>
          <div className="text-xs text-gray-700 mt-1">CPU: 60-77%</div>
          <div className="text-xs text-gray-700">Backplane: 56 Gbps</div>
          <div className="text-xs text-red-600 font-bold">6.9k packet drops</div>
        </div>
      </div>

      {/* Distribution Layer */}
      <div className="grid grid-cols-4 gap-4 mb-6 px-8">
        {/* SW-TI-02 */}
        <div className="flex flex-col items-center">
          <div className="border-2 border-orange-500 bg-orange-50 rounded p-2">
            <Network className="w-8 h-8 text-orange-600" />
          </div>
          <div className="text-xs font-semibold mt-1">SW-TI-02</div>
          <div className="text-xs text-orange-600">‚ö†Ô∏è 890 Mbps</div>
          <div className="text-xs text-gray-500">(89% link 1G)</div>
        </div>

        {/* SW-TI-03 */}
        <div className="flex flex-col items-center">
          <div className="border-2 border-gray-400 bg-gray-50 rounded p-2">
            <Network className="w-8 h-8 text-gray-600" />
          </div>
          <div className="text-xs font-semibold mt-1">SW-TI-03</div>
          <div className="text-xs text-green-600">‚úì OK</div>
        </div>

        {/* SW-PROD-01 */}
        <div className="flex flex-col items-center">
          <div className="border-2 border-orange-400 bg-orange-50 rounded p-2">
            <Network className="w-8 h-8 text-orange-500" />
          </div>
          <div className="text-xs font-semibold mt-1">SW-PROD-01</div>
          <div className="text-xs text-gray-600">(T2600G-52TS)</div>
          <div className="text-xs text-orange-600">‚ö†Ô∏è Sem redund.</div>
        </div>

        {/* SW-MICRO */}
        <div className="flex flex-col items-center">
          <div className="border-2 border-gray-400 bg-gray-50 rounded p-2">
            <Network className="w-8 h-8 text-gray-600" />
          </div>
          <div className="text-xs font-semibold mt-1">SW-MICRO</div>
          <div className="text-xs text-green-600">‚úì OK</div>
        </div>
      </div>

      {/* Access Layer - Simplified */}
      <div className="grid grid-cols-3 gap-4 px-12">
        <div className="flex flex-col items-center">
          <div className="border border-gray-300 bg-white rounded p-2">
            <Network className="w-6 h-6 text-gray-500" />
          </div>
          <div className="text-xs mt-1">SW-ALMOX</div>
          <div className="text-xs text-gray-500">SG3452</div>
        </div>

        <div className="flex flex-col items-center">
          <div className="border border-gray-300 bg-white rounded p-2">
            <Network className="w-6 h-6 text-gray-500" />
          </div>
          <div className="text-xs mt-1">SW-SERIGRAF</div>
          <div className="text-xs text-gray-500">SG3452</div>
        </div>

        <div className="flex flex-col items-center">
          <div className="border border-gray-300 bg-white rounded p-2">
            <Network className="w-6 h-6 text-gray-500" />
          </div>
          <div className="text-xs mt-1">SW-SOPRO</div>
          <div className="text-xs text-gray-500">Acesso</div>
        </div>
      </div>

      {/* Stats */}
      <div className="mt-8 bg-red-50 border-2 border-red-300 rounded-lg p-4">
        <h3 className="text-sm font-bold text-red-700 mb-2">‚ö†Ô∏è PROBLEMAS IDENTIFICADOS:</h3>
        <ul className="text-xs space-y-1 text-gray-700">
          <li>‚Ä¢ CPU Core: 60-77% (limite cr√≠tico)</li>
          <li>‚Ä¢ 6.9k packet drops no LAG</li>
          <li>‚Ä¢ SW-TI-02: 89% utiliza√ß√£o link 1G</li>
          <li>‚Ä¢ Sem redund√¢ncia nos uplinks</li>
          <li>‚Ä¢ Backplane 56 Gbps insuficiente</li>
        </ul>
      </div>
    </div>
  );

  const AfterTopology = () => (
    <div className="w-full h-full p-6 bg-gradient-to-br from-green-50 to-blue-50">
      <div className="text-center mb-6">
        <h2 className="text-2xl font-bold text-green-600 mb-2">TOPOLOGIA PROPOSTA (DEPOIS)</h2>
        <p className="text-sm text-gray-600">Cen√°rio 2 - Investimento: $3,218 USD</p>
      </div>

      {/* Cloud */}
      <div className="flex justify-center mb-6">
        <div className="flex flex-col items-center">
          <Cloud className="w-12 h-12 text-blue-400" />
          <div className="text-xs mt-1">Internet</div>
        </div>
      </div>

      {/* Fortigate */}
      <div className="flex justify-center mb-6">
        <div className="flex flex-col items-center">
          <div className="border-4 border-blue-500 bg-blue-100 rounded-lg p-3 shadow-lg">
            <Shield className="w-10 h-10 text-blue-600" />
          </div>
          <div className="text-xs font-bold mt-1">Fortigate 100F</div>
          <div className="text-xs text-green-600">Router Inter-VLAN + ACL</div>
          <div className="text-xs text-gray-500">CPU: 4% | MEM: 30%</div>
        </div>
      </div>

      {/* LAG Connection */}
      <div className="flex justify-center mb-2">
        <div className="flex flex-col items-center">
          <div className="border-l-4 border-green-500 h-8"></div>
          <div className="border-l-4 border-green-500 h-8"></div>
          <div className="text-xs text-green-600 font-bold">LAG 2x10G Fibra</div>
        </div>
      </div>

      {/* Core Switch - USW-Pro-Aggregation */}
      <div className="flex justify-center mb-6">
        <div className="flex flex-col items-center">
          <div className="border-4 border-green-600 bg-green-100 rounded-lg p-4 shadow-2xl">
            <Network className="w-14 h-14 text-green-700" />
          </div>
          <div className="text-sm font-bold mt-2 text-green-700">SW-TI-01 (NOVO)</div>
          <div className="text-xs font-bold text-green-600">‚úÖ USW-Pro-Aggregation</div>
          <div className="text-xs text-gray-700 mt-1">28x 10G SFP+ | Layer 3</div>
          <div className="text-xs text-gray-700">Backplane: 560 Gbps (10x)</div>
          <div className="text-xs text-green-600 font-bold">CPU: ~25% | 0 drops</div>
        </div>
      </div>

      {/* LAG indicators */}
      <div className="flex justify-center gap-8 mb-2">
        <div className="flex flex-col items-center">
          <div className="border-l-4 border-green-500 h-8"></div>
          <div className="border-l-4 border-green-500 h-8"></div>
        </div>
        <div className="flex flex-col items-center">
          <div className="border-l-4 border-green-500 h-8"></div>
          <div className="border-l-4 border-green-500 h-8"></div>
        </div>
        <div className="flex flex-col items-center">
          <div className="border-l-4 border-green-500 h-8"></div>
          <div className="border-l-4 border-green-500 h-8"></div>
        </div>
        <div className="flex flex-col items-center">
          <div className="border-l-4 border-green-500 h-8"></div>
          <div className="border-l-4 border-green-500 h-8"></div>
        </div>
      </div>

      {/* Distribution Layer */}
      <div className="grid grid-cols-4 gap-4 mb-6 px-8">
        {/* SW-TI-02 */}
        <div className="flex flex-col items-center">
          <div className="border-4 border-green-500 bg-green-50 rounded p-2 shadow-md">
            <Network className="w-8 h-8 text-green-600" />
          </div>
          <div className="text-xs font-semibold mt-1">SW-TI-02</div>
          <div className="text-xs text-green-600">‚úÖ LAG 2x10G</div>
          <div className="text-xs text-gray-500">(8.9% util.)</div>
          <div className="text-xs text-blue-600">Mantido</div>
        </div>

        {/* SW-TI-03 */}
        <div className="flex flex-col items-center">
          <div className="border-4 border-green-500 bg-green-50 rounded p-2 shadow-md">
            <Network className="w-8 h-8 text-green-600" />
          </div>
          <div className="text-xs font-semibold mt-1">SW-TI-03</div>
          <div className="text-xs text-green-600">‚úÖ LAG 2x10G</div>
          <div className="text-xs text-blue-600">Mantido</div>
        </div>

        {/* SW-PROD-01 */}
        <div className="flex flex-col items-center">
          <div className="border-4 border-green-500 bg-green-50 rounded p-2 shadow-md">
            <Network className="w-8 h-8 text-green-600" />
          </div>
          <div className="text-xs font-semibold mt-1">SW-PROD-01</div>
          <div className="text-xs font-bold text-green-600">USW-Pro-48-PoE</div>
          <div className="text-xs text-gray-600">48p PoE + 4x10G</div>
          <div className="text-xs text-green-600">‚úÖ LAG 2x10G</div>
        </div>

        {/* SW-MICRO */}
        <div className="flex flex-col items-center">
          <div className="border-4 border-green-500 bg-green-50 rounded p-2 shadow-md">
            <Network className="w-8 h-8 text-green-600" />
          </div>
          <div className="text-xs font-semibold mt-1">SW-MICRO</div>
          <div className="text-xs text-green-600">‚úÖ LAG 2x10G</div>
          <div className="text-xs text-blue-600">Mantido SG3452</div>
        </div>
      </div>

      {/* Access Layer */}
      <div className="grid grid-cols-3 gap-4 px-12 mb-4">
        <div className="flex flex-col items-center">
          <div className="border-2 border-blue-400 bg-blue-50 rounded p-2">
            <Network className="w-6 h-6 text-blue-500" />
          </div>
          <div className="text-xs mt-1">SW-ALMOX</div>
          <div className="text-xs text-blue-600">Mantido SG3452</div>
        </div>

        <div className="flex flex-col items-center">
          <div className="border-2 border-blue-400 bg-blue-50 rounded p-2">
            <Network className="w-6 h-6 text-blue-500" />
          </div>
          <div className="text-xs mt-1">SW-SERIGRAF</div>
          <div className="text-xs text-green-600">‚úÖ LAG 2x10G</div>
          <div className="text-xs text-blue-600">Mantido SG3452</div>
        </div>

        <div className="flex flex-col items-center">
          <div className="border-2 border-blue-400 bg-blue-50 rounded p-2">
            <Network className="w-6 h-6 text-blue-500" />
          </div>
          <div className="text-xs mt-1">SW-SOPRO</div>
          <div className="text-xs text-blue-600">Mantido</div>
        </div>
      </div>

      {/* Devices Summary */}
      <div className="grid grid-cols-5 gap-2 px-8 mb-4">
        <div className="flex flex-col items-center bg-white rounded p-2 shadow">
          <Smartphone className="w-5 h-5 text-purple-500" />
          <div className="text-xs mt-1">480 cel</div>
        </div>
        <div className="flex flex-col items-center bg-white rounded p-2 shadow">
          <Server className="w-5 h-5 text-blue-500" />
          <div className="text-xs mt-1">230 PCs</div>
        </div>
        <div className="flex flex-col items-center bg-white rounded p-2 shadow">
          <Printer className="w-5 h-5 text-gray-500" />
          <div className="text-xs mt-1">45 print</div>
        </div>
        <div className="flex flex-col items-center bg-white rounded p-2 shadow">
          <Camera className="w-5 h-5 text-red-500" />
          <div className="text-xs mt-1">35 DVRs</div>
        </div>
        <div className="flex flex-col items-center bg-white rounded p-2 shadow">
          <HardDrive className="w-5 h-5 text-orange-500" />
          <div className="text-xs mt-1">30 colet</div>
        </div>
      </div>

      {/* Benefits */}
      <div className="mt-4 bg-green-50 border-2 border-green-400 rounded-lg p-4">
        <h3 className="text-sm font-bold text-green-700 mb-2">‚úÖ MELHORIAS IMPLEMENTADAS:</h3>
        <div className="grid grid-cols-2 gap-2">
          <ul className="text-xs space-y-1 text-gray-700">
            <li>‚Ä¢ Backplane: 56 ‚Üí 560 Gbps (10x)</li>
            <li>‚Ä¢ CPU Core: 77% ‚Üí 25%</li>
            <li>‚Ä¢ Packet drops: 6.9k ‚Üí 0</li>
            <li>‚Ä¢ Buffer: 4.1 ‚Üí 32 MB (7.8x)</li>
          </ul>
          <ul className="text-xs space-y-1 text-gray-700">
            <li>‚Ä¢ Redund√¢ncia total (LAGs)</li>
            <li>‚Ä¢ PoE 600W para c√¢meras IP</li>
            <li>‚Ä¢ Layer 3 dispon√≠vel</li>
            <li>‚Ä¢ Preparado para 5 anos</li>
          </ul>
        </div>
      </div>
    </div>
  );

  return (
    <div className="w-full h-screen bg-gray-100">
      {/* Toggle Buttons */}
      <div className="flex justify-center gap-4 py-4 bg-white shadow-md">
        <button
          onClick={() => setView('before')}
          className={`px-6 py-2 rounded-lg font-semibold transition-all ${
            view === 'before'
              ? 'bg-red-500 text-white shadow-lg'
              : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
          }`}
        >
          ANTES (Atual)
        </button>
        <button
          onClick={() => setView('after')}
          className={`px-6 py-2 rounded-lg font-semibold transition-all ${
            view === 'after'
              ? 'bg-green-500 text-white shadow-lg'
              : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
          }`}
        >
          DEPOIS (Proposta)
        </button>
      </div>

      {/* Topology Display */}
      <div className="h-[calc(100vh-80px)] overflow-auto">
        {view === 'before' ? <BeforeTopology /> : <AfterTopology />}
      </div>
    </div>
  );
};

export default NetworkTopology;
